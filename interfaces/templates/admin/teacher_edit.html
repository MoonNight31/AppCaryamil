{% extends 'admin/base.html' %}
{% block title %}{% if teacher %}Modifier{% else %}Cr√©er{% endif %} professeur - Admin{% endblock %}
{% block content %}
<div class="top-bar">
    <h1 class="page-title">{% if teacher %}‚úèÔ∏è Modifier{% else %}‚ûï Cr√©er{% endif %} un professeur</h1>
    <a href="{% url 'admin_teachers_list' %}" class="btn btn-secondary">‚Üê Retour</a>
</div>

<div class="card">
    <form method="post">
        {% csrf_token %}
        
        <h3 style="margin-bottom: 20px;">Informations de connexion</h3>
        
        <div class="form-group">
            <label>Nom d'utilisateur *</label>
            <input type="text" name="username" value="{{ teacher.username }}" required {% if teacher %}readonly style="background: #f1f5f9;"{% endif %}>
            {% if not teacher %}<small style="color: #64748b;">Ce sera l'identifiant de connexion</small>{% endif %}
        </div>
        
        <div class="form-group">
            <label>Mot de passe {% if not teacher %}*{% else %}(laisser vide pour ne pas changer){% endif %}</label>
            <input type="password" name="password" {% if not teacher %}required{% endif %}>
            <small style="color: #64748b;">{% if teacher %}Ne remplir que si vous voulez changer le mot de passe{% else %}Minimum 8 caract√®res recommand√©{% endif %}</small>
        </div>
        
        <hr style="margin: 30px 0; border-color: #e2e8f0;">
        
        <h3 style="margin-bottom: 20px;">Informations personnelles</h3>
        
        <div class="form-group">
            <label>Pr√©nom *</label>
            <input type="text" name="first_name" value="{{ teacher.first_name }}" required>
        </div>
        
        <div class="form-group">
            <label>Nom *</label>
            <input type="text" name="last_name" value="{{ teacher.last_name }}" required>
        </div>
        
        <div class="form-group">
            <label>Email</label>
            <input type="email" name="email" value="{{ teacher.email }}">
        </div>
        
        <hr style="margin: 30px 0; border-color: #e2e8f0;">
        
        <h3 style="margin-bottom: 20px;">R√¥le et statut</h3>
        
        <div class="checkbox-group">
            <label>
                <input type="checkbox" name="is_director" {% if teacher.is_director %}checked{% endif %}>
                üéì Directeur (acc√®s au panel administrateur)
            </label>
            <label>
                <input type="checkbox" name="is_active" {% if teacher %}{% if teacher.is_active %}checked{% endif %}{% else %}checked{% endif %}>
                ‚úÖ Compte actif
            </label>
        </div>
        
        <hr style="margin: 30px 0; border-color: #e2e8f0;">
        
        <h3 style="margin-bottom: 20px;">Classes enseign√©es</h3>
        
        <div class="form-group">
            <label>S√©lectionnez les classes</label>
            <div style="max-height: 300px; overflow-y: auto; border: 1px solid #e2e8f0; border-radius: 8px; padding: 16px;">
                {% for classroom in classrooms %}
                    <div style="margin-bottom: 10px;">
                        <label style="display: flex; align-items: center; gap: 8px; cursor: pointer; padding: 8px; border-radius: 6px; transition: background 0.2s;" onmouseover="this.style.background='#f8fafc'" onmouseout="this.style.background='transparent'">
                            <input type="checkbox" name="classrooms" value="{{ classroom.id }}" 
                                {% if classroom in assigned_classrooms %}checked{% endif %}>
                            <span><strong>{{ classroom.name }}</strong> - {{ classroom.level.name }}</span>
                        </label>
                    </div>
                {% endfor %}
            </div>
            <small style="color: #64748b;">Les classes s√©lectionn√©es seront assign√©es √† ce professeur</small>
        </div>
        
        <div style="margin-top: 30px;">
            <button type="submit" class="btn btn-success">üíæ Enregistrer</button>
            <a href="{% url 'admin_teachers_list' %}" class="btn btn-secondary">Annuler</a>
        </div>
    </form>
</div>
{% endblock %}
