{% extends 'admin/base.html' %}
{% block title %}{% if student %}Modifier{% else %}Cr√©er{% endif %} √©l√®ve - Admin{% endblock %}
{% block content %}
<div class="top-bar">
    <h1 class="page-title">{% if student %}‚úèÔ∏è Modifier{% else %}‚ûï Cr√©er{% endif %} un √©l√®ve</h1>
    <a href="{% url 'admin_students_list' %}" class="btn btn-secondary">‚Üê Retour</a>
</div>
<div class="card">
    <form method="post" enctype="multipart/form-data">
        {% csrf_token %}
        <div class="form-group">
            <label>Pr√©nom *</label>
            <input type="text" name="first_name" value="{{ student.first_name }}" required>
        </div>
        <div class="form-group">
            <label>Nom *</label>
            <input type="text" name="last_name" value="{{ student.last_name }}" required>
        </div>
        <div class="form-group">
            <label>Date de naissance</label>
            <input type="date" name="date_of_birth" value="{{ student.date_of_birth|date:'Y-m-d' }}">
        </div>
        <div class="form-group">
            <label>Classe</label>
            <select name="classroom">
                <option value="">Aucune</option>
                {% for classroom in classrooms %}
                <option value="{{ classroom.id }}" {% if student and student.classroom and student.classroom.id == classroom.id %}selected{% endif %}>{{ classroom.name }} ({{ classroom.level.name }})</option>
                {% endfor %}
            </select>
        </div>
        <div class="form-group">
            <label>Parents</label>
            <select name="parents" multiple style="height: 150px;">
                {% for parent in parents %}
                <option value="{{ parent.id }}" {% if student and parent in student.parents.all %}selected{% endif %}>{{ parent.get_full_name|default:parent.username }}</option>
                {% endfor %}
            </select>
            <small style="color: #64748b;">Maintenez Ctrl (ou Cmd) pour s√©lectionner plusieurs parents</small>
        </div>
        <div class="form-group">
            <label>Photo</label>
            <input type="file" name="photo" accept="image/*">
            {% if student.photo %}<p>Photo actuelle: {{ student.photo.name }}</p>{% endif %}
        </div>
        <button type="submit" class="btn btn-success">üíæ Enregistrer</button>
    </form>
</div>
{% endblock %}
